(this["webpackJsonpcharter-code-challenge"]=this["webpackJsonpcharter-code-challenge"]||[]).push([[0],{24:function(e,t,a){e.exports=a(39)},29:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),o=a(18),l=(a(29),a(30),a(1)),c=a(6),i=a(7),u=a(8),p=a(10),m=a(9);var h=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Charter/Spectrum Code Challenge"),r.a.createElement("p",null,"React Application using restaurant data"))},g=a(12),f=a.n(g),d=a(15),v=a(14),E=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},b=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).gotoPage=function(e){var t=n.props.onPageChanged,a=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,n.totalPages)),s={currentPage:r,totalPages:n.totalPages,pageLimit:n.pageLimit,totalRecords:n.totalRecords};n.setState({currentPage:r},(function(){return a(s)}))},n.handleClick=function(e,t){t.preventDefault(),n.gotoPage(e)},n.handleMoveLeft=function(e){e.preventDefault(),n.gotoPage(n.state.currentPage-2*n.pageNeighbours-1)},n.handleMoveRight=function(e){e.preventDefault(),n.gotoPage(n.state.currentPage+2*n.pageNeighbours+1)},n.fetchPageNumbers=function(){console.log(Object(v.a)(n));var e=n.totalPages,t=n.state.currentPage,a=n.pageNeighbours,r=2*n.pageNeighbours+3;if(e>r+2){var s=[],o=t-a,l=t+a,i=e-1,u=o>2?o:2,p=l<i?l:i,m=r-(s=E(u,p)).length-1,h=u>2,g=p<i,f="LEFT";if(h&&!g){var d=E(u-m,u-1);s=[f].concat(Object(c.a)(d),Object(c.a)(s))}else if(!h&&g){var b=E(p+1,p+m);s=[].concat(Object(c.a)(s),Object(c.a)(b),["RIGHT"])}else h&&g&&(s=[f].concat(Object(c.a)(s),["RIGHT"]));return[1].concat(Object(c.a)(s),[e])}return E(1,e)};var r=e.totalRecords,s=void 0===r?null:r,o=e.pageLimit,l=void 0===o?30:o,u=e.pageNeighbours,p=void 0===u?0:u;return n.pageLimit="number"===typeof l?l:30,n.totalRecords="number"===typeof s?s:0,n.pageNeighbours="number"===typeof p?Math.max(0,Math.min(p,2)):0,n.totalPages=Math.ceil(n.totalRecords/n.pageLimit),n.state={currentPage:1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"componentDidUpdate",value:function(e){e.totalRecords!==this.props.totalRecords&&(this.totalPages=this.props.totalPages)}},{key:"render",value:function(){var e=this;if(!this.totalRecords)return null;if(1===this.totalPages)return null;var t=this.state.currentPage,a=this.fetchPageNumbers();return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{"aria-label":"Restaurants Pagination"},r.a.createElement("ul",{className:"pagination"},a.map((function(a,n){return"LEFT"===a?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),r.a.createElement("span",{className:"sr-only"},"Previous"))):"RIGHT"===a?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"),r.a.createElement("span",{className:"sr-only"},"Next"))):r.a.createElement("li",{key:n,className:"page-item".concat(t===a?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(t){return e.handleClick(a,t)}},a))})))))}}]),a}(n.Component),y=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={restaurants:[],currentRestaurants:[],currentPage:null,totalPages:null},e.resetList=function(t,a){var n=e.state.restaurants,r=n.length;console.log(r),console.log(a);var s=Math.ceil(r/a);console.log(s),console.log(t),console.log(n);var o=(t-1)*a,l=n.slice(o,o+a);console.log(l),e.setState({currentPage:t,currentRestaurants:l,totalPages:s}),console.log(e.state)},e.onPageChanged=function(t){var a=e.state.restaurants,n=t.currentPage,r=t.totalPages,s=t.pageLimit,o=(n-1)*s,l=a.slice(o,o+s);e.setState({currentPage:n,currentRestaurants:l,totalPages:r})},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.restaurants,console.log(t.restaurants),console.log(a),t.restaurants===a){e.next=8;break}return e.next=6,this.setState({restaurants:a});case 6:return e.next=8,this.resetList(1,10);case 8:case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.restaurants,a=(e.currentRestaurants,e.currentPage),n=e.totalPages,s=t.length;if(0===s)return r.a.createElement("h4",null,"No Results were found !!!");var o=["text-dark py-2 pr-4 m-0",a?"border-gray border-right":""].join(" ").trim();return r.a.createElement("div",{className:"container mb-5"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"State"),r.a.createElement("th",null,"Phone Number"),r.a.createElement("th",null,"Genres"))),r.a.createElement("tbody",null,this.state.currentRestaurants.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.city),r.a.createElement("td",null,e.state),r.a.createElement("td",null,e.telephone),r.a.createElement("td",null,e.genre))})))),r.a.createElement("div",{className:"row d-flex flex-row py-2"},r.a.createElement("div",{className:"w-100 px-4 py-2 d-flex flex-row flex-wrap align-items-center justify-content-between"},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("h4",{className:o},r.a.createElement("strong",{className:"text-secondary"},s)," ","Restaurants"),a&&r.a.createElement("span",{className:"current-page d-inline-block h-100 pl-4 text-secondary"},"Page ",r.a.createElement("span",{className:"font-weight-bold"},a)," /"," ",r.a.createElement("span",{className:"font-weight-bold"},n))),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(b,{totalRecords:s,pageLimit:10,pageNeighbours:0,onPageChanged:this.onPageChanged})))))}}]),a}(r.a.Component);function P(e){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw a=e.sent,new Error(a);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){throw console.error("API call failed. "+e),e}var O="https://code-challenge.spectrumtoolbox.com/api/restaurants/";a(32);var j=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={checkedOptions:{}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.optionsList;console.log(t);var a=t.map((function(t,a){return r.a.createElement("div",{className:"check",key:a},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"{option}",onClick:function(a){return e.props.onChange(t,a.checked)}}),t))}));return r.a.createElement("form",null,a)}}]),a}(r.a.Component),w={gt:{asc:1,desc:-1},lt:{asc:-1,desc:1}},x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ASC",r=e[a],s=t[a];return r<s?w.lt[n.toLowerCase()]:r>s?w.gt[n.toLowerCase()]:0},C=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return"string"===typeof t[0]&&(t=[{direction:t[1],property:t[0]}]),function(e,a){var n=0;return t.some((function(t){var r=t.property,s=t.direction,o=x(e,a,r,void 0===s?"ASC":s);return 0!==o&&(n=o,!0)})),n}},R=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={restaurants:[],allRestaurants:[],selectedOptions:[],sorters:e.props.sorters},e.compareBy=function(e){return function(t,a){return t[e]<a[e]?-1:t[e]>a[e]?1:0}},e.sortList=function(t){var a=Object(c.a)(e.state.restaurants);a.sort(e.compareBy(t)),console.log(a),e.setState({users:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch(O,{headers:{Authorization:"Api-Key q3MNxtfep8Gt"}}).then(P).catch(k).then((function(t){return e.setState({allRestaurants:t,restaurants:e.parseData(t)})}))}},{key:"componentDidUpdate",value:function(e){var t=this.state,a=t.restaurants;t.selectedOptions;console.log(e.restaurants),console.log(a),e.restaurants&&e.restaurants!==a&&this.setState({restaurants:this.parseData(a)})}},{key:"parseData",value:function(e){var t=this.state.sorters,a=this.state.selectedOptions;return e&&e.length&&(Array.isArray(a)&&a.length&&a.map((function(t){e=e.filter((function(e){return e.state===t}))})),Array.isArray(t)&&t.length&&e.sort(C.apply(void 0,Object(c.a)(t)))),console.log(e),e}},{key:"handleOnChange",value:function(e){var t=this.state,a=t.restaurants,n=t.selectedOptions;if(console.log(e),console.log(n),n.includes(e)){var r=n.indexOf(e);r>=0&&n.splice(r,1),console.log(n),this.setState({selectedOptions:n})}else n.push(e),console.log(n),this.setState({selectedOptions:n});console.log(this.state.selectedOptions),this.setState({restaurants:this.parseData(a)})}},{key:"render",value:function(){var e=this.state,t=e.allRestaurants,a=e.restaurants;console.log(a),console.log(t);var n=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.map((function(t){t.map((function(t){e.includes(t.state)||e.push(t.state)}))})),e.sort()}(t),s=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.map((function(t){t.map((function(t){e.includes(t.attire)||e.push(t.attire)}))})),e.sort()}(t),o=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.map((function(t){t.map((function(t){[],t.genre.split(",").map((function(t){e.includes(t)||e.push(t)}))}))})),e.sort()}(t);return console.log(n),console.log(s),console.log(o),r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement("div",null,r.a.createElement("h3",null,"List of Restaurants")),r.a.createElement("div",{className:"filter-section"},r.a.createElement("h6",null,"Filter by State:"),r.a.createElement(j,{optionsList:n,onChange:this.handleOnChange.bind(this)})),r.a.createElement("div",{className:"filter-section"},r.a.createElement("h6",null,"Filter by Genres:"),r.a.createElement(j,{optionsList:o,onChange:this.handleOnChange.bind(this)})),r.a.createElement(y,{restaurants:a}))}}]),a}(r.a.Component);R.defaultProps={sorters:[{property:"name"},{property:"state"}]};var L=R,A=(a(33),function(){return r.a.createElement("h1",null,"Oops!!! Page Not Found!!!")});var S=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:L}),r.a.createElement(l.a,{component:A})))};Object(s.render)(r.a.createElement(o.a,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.39c50027.chunk.js.map